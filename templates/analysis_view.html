<!-- templates/analysis_view.html -->
{% extends "base.html" %}
{% block title %}View Previous Analysis - SmartCareer{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
  <!-- Header -->
  <div class="text-center mb-8">
    <h1 class="text-3xl font-extrabold text-gray-900">ðŸ“„ Resume Analysis Reult</h1>
    <p class="text-gray-600">Review your AI-powered feedback and improvement suggestions</p>
    
    {% if resume_filename %}
      <div class="mt-4 bg-gray-50 p-3 rounded-lg inline-block text-sm">
        <strong>File:</strong> {{ resume_filename }} |
        <strong>Updated:</strong> {{ analyzed_on.strftime('%b %d, %Y at %H:%M') }}
      </div>
    {% endif %}
  </div>

  <!-- Action Buttons -->
  <div class="flex flex-wrap justify-center gap-4 mb-8">
    <a href="{{ url_for('resume_analysis') }}" class="px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
      Upload New Resume
    </a>
    <a href="{{ url_for('cover_letter') }}" class="px-5 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50">
      Proceed to Cover Letter
    </a>
  </div>

  <!-- ATS Score -->
  <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8">
    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
      <i class="fas fa-chart-line text-indigo-600 mr-2"></i>
      ATS Compatibility Score (0 to 10)
    </h2>
    <div class="flex items-center">
      <div class="text-5xl font-bold text-indigo-600 mr-4">{{ feedback.ats_score or 0 }}</div>
      <div>
        <p class="text-gray-700"><strong>Score:</strong>
          {% if feedback.ats_score >= 8 %}Excellent
          {% elif feedback.ats_score >= 6 %}Good
          {% else %}Needs Work{% endif %}
        </p>
        <div class="w-48 bg-gray-200 rounded-full h-3 mt-2">
          <div class="bg-indigo-600 h-3 rounded-full" style="width: {{ (feedback.ats_score or 0) * 10 }}%;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Key Skills -->
  <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8">
    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
      <i class="fas fa-code text-green-600 mr-2"></i>
      Key Skills Detected
    </h2>
    <div class="flex flex-wrap gap-2">
      {% for skill in feedback.key_skills %}
        <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium">{{ skill }}</span>
      {% endfor %}
    </div>
  </div>

  <!-- Strengths -->
  <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8">
    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
      <i class="fas fa-check-circle text-blue-600 mr-2"></i>
      Strengths
    </h2>
    <ul class="list-disc pl-5 space-y-2 text-gray-700">
      {% for strength in feedback.strengths %}
        <li>{{ strength }}</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Missing Sections -->
  <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8">
    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
      <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>
      Missing Sections
    </h2>
    <ul class="list-disc pl-5 space-y-2 text-gray-700">
      {% for section in feedback.missing_sections %}
        <li>{{ section }} â€” Consider adding this section.</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Improvements -->
  <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8">
    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
      <i class="fas fa-lightbulb text-purple-600 mr-2"></i>
      Suggestions for Improvement
    </h2>
    <div class="space-y-6">
      {% for imp in feedback.improvements %}
        <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
          <h3 class="font-semibold text-gray-900">{{ imp.issue }}</h3>
          <p class="text-gray-700 mt-1">{{ imp.suggestion }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}